
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>OLP 基本信息</title>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <link rel="stylesheet" href="../css/grids-min.css" />
   <link rel="stylesheet" href="../css/cview.css" type="text/css"/>
   <link rel="stylesheet" href="../css/style.css" type="text/css" />
   <link rel="stylesheet" href="../css/button.css" type="text/css"/>
   <script src="../js/checknum.js" type="text/javascript"></script>
   <script src="../js/checkfloat.js" type="text/javascript"></script>
   <script src="../js/validate.js" type="text/javascript"></script>
   <script src="../js/opt.js" type="text/javascript"></script>
   <script src="../js/msg.js" type="text/javascript"></script>
</head>
<script language="javascript">
function toUrl(p)   
{ 
  location.href="/goform/slot?cid=0&uid=" +olpForm.uid.value +"&page=" +p;   
} 
function checkmode() {  
 if(document.getElementById('mode').checked==true){
    document.getElementById("L1").disabled=true;
    document.getElementById("L2").disabled=true;
  }
  else{
    document.getElementById('L1').disabled=false;  
    document.getElementById('L2').disabled=false; 
  }
}
function check(disabled) {  
 if(document.getElementById('ret').checked==true) 
  {
     document.getElementById('rettime').style.visibility="visible";
  }
  else{
      document.getElementById('rettime').style.visibility="hidden";     
    }
}

function valid(obj,i){
var msg="",minv=0,maxv=100;
msg=document.getElementById("T"+i).innerText;
if (i>3 && i<7)
{
  minv=-50;
  maxv=20;
}
else if (i==7)
{
  minv=0;
  maxv=999;
}
return checkNumber(obj,minv,maxv,msg);
}
function checkPower(obj,i)
{
  var t;
  if (4==i)
     t="L1切换功率";
  else if (5==i)
     t="L2切换功率";
  else if (6==i)
     t="Tx告警功率";
  else
       return false;
  return checkFloatRange(obj,-50, 10,t);
}
function checkAll()
{
  var n;
  var ret;
  for (n=4;n<7;n++)
   {
    if (true!=checkPower(document.getElementById("i"+n),n))
        return false;
   }
   //alert("checkAll ok");
   return true; 
}
function app(act)
{
  var ret;
  
  if (1==act)
  {
    if (true!=checkAll())
       return false;
    ret=opt_ack(1,"OLP 信号");
  }
  else if (2==act)
    ret=opt_ack(0,"恢复缺省设置");
  else
       return false;
  if (false!=ret)
  {
   showWait("ibox",true,"");
   document.body.style.cursor="wait";
   if (2==act)
    {
      //alert("/goform/olp?act=2&cid=0&uid=" +olpForm.uid.value);
       window.location.href="/goform/olp?act=2&cid=0&uid=" +olpForm.uid.value;
      return true;
    }
  }
  return ret;
}

window.onload=function(){
 showWait("ibox",false,"");
 checkmode();
 check();
}
</script>
<body class="yui3-skin-sam">

<ul id="nav">
  <li><a href="index.htm">帮助</a></li>
  <li><a href="chassis.htm">设备视图</a></li>
  <li><a href="ml.htm">模块列表</a></li>
  <li><a href="alarm.htm">告警管理</a></li>
  <li><a href="snmp.htm">SNMP配置</a></li>
  <li><a href="log.htm">日志管理</a></li>
  <li><a href="sys.htm">系统管理</a></li>
  <li><a href="otu.htm">OTU</a></li>
  <li><a href="olp.htm" class="current">OLP</a></li>
  </ul>
<div class="yui3-g" id="bd">
<input type="hidden" id="pid" name="current_page" value="otu.asp">
<input type="hidden" id="cid" name="cid" value="1"/>
<input type="hidden" id="uid" name="uid" value="2"/>
   <div class="yui3-u" id="side" style="padding-top:0;width:90px;">
       <div class="content" style="margin:0;">
            <div id="unitid" class="uh">2</div>
            
<div class='ubd'> <div class='un'><a href='/goform/slot?cid=0&uid=2' target='mf'>OLP</a></div>
<div class='leds'> <div class='ll'>PWR</div>
 <div class='led'><img src='../images/led_1.png' /></div>
 <div class='led'><img src='../images/led_2.png' /></div>
 <div class='ll'>Pri</div>
 <div class='ll'>TX</div>
 <div class='led'><img src='../images/led_2.png' /></div>
 <div class='led'><img src='../images/led_2.png' /></div>
 <div class='ll'>Auto</div>
 <div class='ll'>R1</div>
 <div class='led'><img src='../images/led_2.png' /></div>
 <div class='led'><img src='../images/led_2.png' /></div>
 <div class='ll'>R2</div>
 <div class='clr'></div>
</div>
<div class='adpter'><div class='pl'>RX</div>
<div class='pimg'><img src='../images/p9_2.gif'></div>
</div>
<div class='clr'></div><div class='adpter'><div class='pl'>TX</div>
<div class='pimg'><img src='../images/p9_1.gif'></div>
</div>
<div class='clr'></div><div class='adpter'><div class='pl'>R1</div>
<div class='pimg'><img src='../images/p9_2.gif'></div>
</div>
<div class='clr'></div><div class='adpter'><div class='pl'>T1</div>
<div class='pimg'><img src='../images/p9_1.gif'></div>
</div>
<div class='clr'></div><div class='adpter'><div class='pl'>R2</div>
<div class='pimg'><img src='../images/p9_2.gif'></div>
</div>
<div class='clr'></div><div class='adpter vsb0'><div class='pl'>T2</div>
<div class='pimg'><img src='../images/p9_1.gif'></div>
</div>
<div class='clr'></div><div class='ui'>1+1</div>
</div>

      </div>

<div class="uf"></div>
 </div>
 <div class="yui3-u" id="main" style="padding-top:5px;align-text:center;">
        <div id=olp class="cbox" align='center' style="padding-top:5px;">
        <div class="ibox">第2槽--OLP信息</div>
        <div id="ibox" class="ibox">OLP信息</div>
         <div class="hbox">
         <form name="olpForm" method="POST" action="/goform/olp" onsubmit="return app(1);">
          <input type="hidden" id="pid" name="page" value="olp">
          <input type="hidden" id="cid" name="cid" value="0"/>
          <input type="hidden" id="act" name="act" value="1"/>
          <input type="hidden" id="uid" name="uid" value="2"/>
         <table align='center' class='dt'>
         <tr>     <th>R1光功率</th>     <td>-48.2dBm</td>     <th>R2光功率</th>     <td>-48.2dBm</td>     <th>Tx光功率</th>     <td>-48.2dBm</td>     </tr><tr><th>R1波长</th><td><input type='radio' checked=true name='r1wl' id='r1wl' value='1'>1310nm&nbsp;<input type='radio'  name='r1wl' value='2'>1550nm</td><th>R2波长</th><td><input type='radio' checked=true name='r2wl' id='r2wl' value='1'>1310nm&nbsp;<input type='radio'  name='r2wl' value='2'>1550nm</td><th>Tx波长</th><td><input type='radio' checked=true name='txwl' id='txwl' value='1'>1310nm&nbsp;<input type='radio'  name='txwl' value='2'>1550nm</td></tr><tr>     <th id='T4'>L1切换功率</th>     <td><input type='text' name='L1p' id='i4' value='-28.0' maxlength='5' size='5' onkeyup='inputNumber(this,1,true);' onblur='checkPower(this,9);'>dBm</td>     <th id='T5'>L2切换功率</th>     <td><input type='text' name='L2p' id='i5' value='-28.0' maxlength='5' size='5' onkeyup='inputNumber(this,1,true);' onblur='checkPower(this,10);'>dBm</td>     <th id='T6'>Tx告警功率</th>     <td><input type='text' name='Txp' id='i6' value='-28.0' maxlength='5' size='5' onkeyup='inputNumber(this,1,true);' onblur='checkPower(this,11);'>dBm</td>     </tr><tr><th>工作模式</th><td><input type='radio'  name='mode' id='mode' value='1'     onclick='javascript:checkmode();'>自动&nbsp;<input type='radio' checked=true name='mode' value='2' onclick='javascript:checkmode();'>手动</td><td><span id='linesel'><input type='radio'  name='line'id='L1' value='1'>主路(L1)&nbsp;<input type='radio' name='line'id='L2' checked=true value='2'>备路(L2)</span></td><th>切换规则</th><td colspan='2'><input type='radio' name='rule' value='1'     checked=true>工作光纤优先&nbsp;<input type='radio' name='rule' value='2' >光功率大优先</td></tr><tr><th>返回模式</th>     <td colspan='5'><input type='radio' name='ret' id='ret' value='1' checked=true onclick='javascript:check(false);'>自动返回&nbsp;&nbsp;<span  id='T7'>返回时间(0-999分钟):<input type='text' name='rettime' id='rettime' value='0' maxlength='3' size='3' onkeyup='uIntInput(this);' onblur='valid(this,7);'></span><input type='radio'  name='ret' id='ret' value='2' onclick='javascript:check(true);'>手动返回</td></tr>
         </table>
        </div>
         <div>
         <input class="button white medium" type="button" value="刷新" onclick="javascript:toUrl('olp');" name="refresh"/><input class="button white medium" type="button" value="应用" name="apply" />
        </div>
        </div>
       </form>     
    </div>
</div>
</body>
</html>

